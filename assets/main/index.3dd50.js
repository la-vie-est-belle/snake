window.__require=function t(o,n,i){function e(r,h){if(!n[r]){if(!o[r]){var a=r.split("/");if(a=a[a.length-1],!o[a]){var c="function"==typeof __require&&__require;if(!h&&c)return c(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var d=n[r]={exports:{}};o[r][0].call(d.exports,function(t){return e(o[r][1][t]||t)},d,d.exports,t,o,n,i)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)e(i[r]);return e}({Food:[function(t,o){"use strict";cc._RF.push(o,"3928cfFPeZGca6S74tTY+fa","Food"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.color=this.randomColor(),this.node.setPosition(this.randomPos())},randomColor:function(){var t=Math.round(255*Math.random()),o=Math.round(255*Math.random()),n=Math.round(255*Math.random());return new cc.Color(t,o,n)},randomPos:function(){var t=this.node.parent.width,o=this.node.parent.height,n=Math.round(Math.random()*t)-t/2,i=Math.round(Math.random()*o)-o/2;return cc.v2(n,i)}}),cc._RF.pop()},{}],Head:[function(t,o){"use strict";cc._RF.push(o,"023b23mlwJFnJWmUn24AkSh","Head"),cc.Class({extends:cc.Component,properties:{bodyPrefab:{default:null,type:cc.Prefab},foodPrefab:{default:null,type:cc.Prefab},bodyNum:2,sectionLen:50,time:5},onLoad:function(){this.snakeArray=[],this.snakeArray.push(this.node),this.node.color=this.randomColor(),this.node.setPosition(this.randomPos()),this.rotateHead(this.node.position),this.speed=this.sectionLen/this.time,this.pointsArray=[];for(var t=1;t<=this.bodyNum;t++)this.getNewBody();this.dir=null,this.headPointsNum=0,cc.director.getCollisionManager().enabled=!0;var o=cc.instantiate(this.foodPrefab);this.node.parent.addChild(o),this.recordLength=0},randomColor:function(){var t=Math.round(255*Math.random()),o=Math.round(255*Math.random()),n=Math.round(255*Math.random());return new cc.Color(t,o,n)},randomPos:function(){var t=this.node.parent.width,o=this.node.parent.height,n=Math.round(Math.random()*t)-t/2,i=Math.round(Math.random()*o)-o/2;return cc.v2(n,i)},getNewBody:function(){var t=cc.instantiate(this.bodyPrefab);if(this.snakeArray.length>this.bodyNum?t.curIndex=this.snakeArray[this.snakeArray.length-1].curIndex:t.curIndex=0,1==this.snakeArray.length){var o=this.node.position.normalize();t.setPosition(this.node.position.sub(o.mul(this.sectionLen)))}else{var n=this.snakeArray[this.snakeArray.length-1],i=this.snakeArray[this.snakeArray.length-2].position.sub(n.position).normalize();t.setPosition(n.position.sub(i.mul(this.sectionLen)))}t.color=this.node.color,this.node.parent.addChild(t),this.snakeArray.push(t),this.recordPoints(),this.changeZIndex()},rotateHead:function(t){var o=180*cc.v2(1,0).signAngle(t)/Math.PI;this.node.angle=o-90},moveSnake:function(){var t=this.dir.mul(this.speed);this.node.setPosition(this.node.position.add(t)),this.pointsArray.push(this.node.position),this.headPointsNum+=1;for(var o=1;o<this.snakeArray.length;o++){var n=Math.floor((this.pointsArray.length-this.headPointsNum)/(this.snakeArray.length-1)*(this.snakeArray.length-1-o));this.snakeArray[o].setPosition(this.pointsArray[n+this.snakeArray[o].curIndex])}this.pointsArray.length>this.recordLength&&(this.pointsArray.splice(0,1),this.headPointsNum-=1)},recordPoints:function(){for(var t=0,o=0;t<this.sectionLen;){t+=this.speed;var n=this.snakeArray[this.snakeArray.length-1],i=this.snakeArray[this.snakeArray.length-2].position.sub(n.position).normalize(),e=n.position.add(i.mul(t));this.pointsArray.splice(o,0,e),o+=1}this.recordLength=this.pointsArray.length},changeZIndex:function(){for(var t=0;t<this.snakeArray.length;t++)this.snakeArray[t].zIndex=cc.macro.MAX_ZINDEX-t},onCollisionEnter:function(t){t.node.removeFromParent();var o=cc.instantiate(this.foodPrefab);this.node.parent.addChild(o),this.getNewBody()},update:function(){this.dir&&(this.rotateHead(this.dir),this.moveSnake())}}),cc._RF.pop()},{}],JoyStick:[function(t,o){"use strict";cc._RF.push(o,"d3c62eMZBRCya9/jXtIUN9d","JoyStick"),cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.Node}},onLoad:function(){cc.debug.setDisplayStats(!1),this.joyStickBtn=this.node.children[0],this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchcancel",this.onTouchCancel,this)},onTouchStart:function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation());this.joyStickBtn.setPosition(o)},onTouchMove:function(t){var o=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(o));var n=this.joyStickBtn.position.normalize();this.head.getComponent("Head").dir=n},onTouchEnd:function(){this.joyStickBtn.setPosition(cc.v2(0,0))},onTouchCancel:function(){this.joyStickBtn.setPosition(cc.v2(0,0))},update:function(){var t=this.joyStickBtn.position.mag()/(this.node.width/2);t>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(t))}}),cc._RF.pop()},{}]},{},["Food","Head","JoyStick"]);